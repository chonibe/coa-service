{% comment %}
  Customer Dashboard Section
  Displays customer orders with NFC status and certificates
{% endcomment %}

{{ 'customer-dashboard.css' | asset_url | stylesheet_tag }}

<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-white">Your Orders</h1>
    <a href="/pages/authenticate" class="action-button outline">
      Go to Authentication
    </a>
  </div>

  <div id="coa-dashboard-app" class="dashboard-container">
    <div class="loading-state">
      <div class="loading-spinner"></div>
      <p>Loading your orders...</p>
    </div>
  </div>
</div>

<script>
  (function() {
    const script = document.createElement('script')
    script.src = 'https://' + window.location.hostname + '/apps/coa-manager/customer/dashboard'
    script.async = true
    document.getElementById('coa-dashboard-app').appendChild(script)
  })()
</script>

{% stylesheet %}
.dashboard-container {
  min-height: 400px;
  background: linear-gradient(to bottom right, rgb(30 27 75), rgb(24 24 27));
  border-radius: 1rem;
  padding: 1.5rem;
  margin: 2rem 0;
}

.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  color: white;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.order-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  color: white;
}

.order-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
}

.order-title {
  font-size: 1.25rem;
  margin: 0;
  color: white;
}

.order-date {
  color: rgba(255, 255, 255, 0.7);
  margin: 0.5rem 0;
}

.order-total {
  font-weight: bold;
  margin: 0;
  color: white;
}

.status-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 500;
}

.status-badge.paid {
  background: #dcfce7;
  color: #166534;
}

.status-badge.pending {
  background: #fef3c7;
  color: #92400e;
}

.line-items {
  margin-top: 1rem;
}

.line-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.line-item-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.line-item-image {
  width: 80px;
  height: 80px;
  border-radius: 4px;
  overflow: hidden;
}

.line-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.line-item-details h3 {
  margin: 0;
  font-size: 1rem;
  color: white;
}

.line-item-details p {
  margin: 0.25rem 0;
  color: rgba(255, 255, 255, 0.7);
}

.edition-info {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
}

.line-item-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.nfc-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 500;
}

.nfc-badge.paired {
  background: #dcfce7;
  color: #166534;
}

.nfc-badge.unclaimed {
  background: #fef3c7;
  color: #92400e;
}

.nfc-badge.unpaired {
  background: #fee2e2;
  color: #991b1b;
}

.action-button {
  display: inline-block;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.2s;
}

.action-button.outline {
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
}

.action-button.outline:hover {
  background: rgba(255, 255, 255, 0.1);
}

.empty-state {
  text-align: center;
  padding: 3rem 1rem;
  color: white;
}

.error-state {
  text-align: center;
  padding: 3rem 1rem;
  color: #ef4444;
}
{% endstylesheet %}

{% schema %}
{
  "name": "Customer Dashboard",
  "settings": [],
  "presets": [
    {
      "name": "Customer Dashboard",
      "category": "Customer"
    }
  ]
}
{% endschema %} 